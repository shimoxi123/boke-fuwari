---
import { Icon } from "astro-icon/components";
import type { AuthorConfig } from "../types/config";

interface Props {
	author?: AuthorConfig;
	class?: string;
}

const { author, class: className = "" } = Astro.props;

// 如果没有提供作者信息，则不显示组件
if (!author) {
	return null;
}
---

<div class:list={["flex items-center gap-3 p-4 rounded-xl bg-[var(--card-bg)] border border-[var(--line-divider)] onload-animation", className]}>
  {author.avatar && (
    <img 
      src={author.avatar} 
      alt={`${author.name} 的头像`}
      class="w-12 h-12 rounded-full object-cover"
      loading="lazy"
    />
  )}
  
  <div class="flex-1 min-w-0">
    <div class="flex items-center gap-2 mb-1">
      <h3 class="font-bold text-lg text-black/90 dark:text-white/90 truncate">
        {author.name}
      </h3>
      {author.github && (
        <a 
          href={`https://github.com/${author.github}`} 
          target="_blank"
          class="text-black/50 hover:text-[var(--primary)] dark:text-white/50 dark:hover:text-[var(--primary)] transition"
          aria-label={`查看 ${author.name} 的 GitHub`}
        >
          <Icon name="line-md:github-twotone" class="text-xl" />
        </a>
      )}
    </div>
    
    {author.bio && (
      <p class="text-sm text-black/60 dark:text-white/60 mb-2">
        {author.bio}
      </p>
    )}
    
    <div class="flex items-center gap-3">
      {author.website && (
        <a 
          href={author.website} 
          target="_blank"
          class="text-xs text-[var(--primary)] hover:underline transition flex items-center gap-1"
        >
          <Icon name="material-symbols:link-rounded" class="text-sm" />
          个人网站
        </a>
      )}
      
      {author.email && (
        <a 
          href={`mailto:${author.email}`} 
          class="text-xs text-[var(--primary)] hover:underline transition flex items-center gap-1"
        >
          <Icon name="material-symbols:mail-outline-rounded" class="text-sm" />
          联系邮箱
        </a>
      )}
    </div>
  </div>
</div>